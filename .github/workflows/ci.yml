name: SkipUI CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches:
      - '*'
  #schedule:
    # run at 9AM & 9PM UTC
    #- cron:  '0 9,21 * * *'

env:
  DEVELOPER_DIR: /Applications/Xcode_15.0.app/Contents/Developer

jobs:
  ios:
    runs-on: macos-13
    steps:
      - uses: actions/checkout@v2
      - name: Build (Debug)
        run: |
            xcodebuild build \
              -configuration Build \
              -scheme "SkipUI" \
              -sdk "iphonesimulator" \
              -destination "platform=iOS Simulator,name=iPhone 14"
      - name: Test (SkipUI)
        run: |
            sed -i '' 's;import SwiftUI;import SkipUI;g' Tests/*/*.swift
            xcodebuild test \
              -configuration Debug \
              -scheme "SkipUI" \
              -sdk "iphonesimulator" \
              -destination "platform=iOS Simulator,name=iPhone 14"
      - name: Test (SwiftUI)
        run: |
            sed -i '' 's;import SkipUI;import SwiftUI;g' Tests/*/*.swift
            xcodebuild test \
              -configuration Debug \
              -scheme "SkipUI" \
              -sdk "iphonesimulator" \
              -destination "platform=iOS Simulator,name=iPhone 14"

